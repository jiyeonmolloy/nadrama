# Copyright 2025 Nadrama Pty Ltd
# SPDX-License-Identifier: Apache-2.0
---
apiVersion: cli.kyverno.io/v1alpha1
kind: Test
metadata:
  name: system-vap-test-editor-user
policies:
  - ../templates/system-vap.yaml
resources:
  - ./resources/system-vap-resources.yaml
userinfo: ./users/editor-user.yaml
results:
  - policy: system-deny-system-vap
    isValidatingAdmissionPolicy: true
    resources:
      - standard-namespace
    kind: Namespace
    result: pass
  - policy: system-deny-system-vap
    isValidatingAdmissionPolicy: true
    resources:
      - system-namespace
    kind: Namespace
    result: fail
  - policy: system-deny-system-vap
    isValidatingAdmissionPolicy: true
    resources:
      - standard-pod
    kind: Pod
    result: pass
  - policy: system-deny-system-vap
    isValidatingAdmissionPolicy: true
    resources:
      - system-pod
    kind: Pod
    result: fail
